<html>
<body onkeydown="keyPressed()">
    <span id="player" style="position:absolute; left: 20px; top:400px">
        [T]
    </span>
</body>
</html>

<script>
    function keyPressed() {
        var key = window.event.keyCode
        var player = document.getElementById("player");

        // 37 left 39 right 32 spacebar
        if (key === 37) {
            player.style.left = parseFloat(player.style.left) - 10 + "px";
        }
        else if (key === 39) {
            player.style.left = parseFloat(player.style.left) + 10 + "px";
        }
        else if (key === 32)
            fire(player);
    }

    function fire(posistion) {

        var bullet = document.createElement('span');
        bullet.textContent = "^";

        document.body.appendChild(bullet);
        bullettId++;

        bullet.style.left = parseFloat(posistion.style.left) + 6 + "px";
        bullet.style.top = parseFloat(posistion.style.top) - 8 + "px";
        bullet.style.position = "absolute";
        bullet.id = "bullet" + bullettId;

        Projectile(bullet);
    }

    var bullettId = 0;

    async function Projectile(bullet) {

        var i = parseFloat(bullet.style.top);

        for (i; i >= 10;i--) {
            bullet.style.top = parseFloat(bullet.style.top) - 1 + "px";
            await sleep();
        }

        bullet.remove();
    }

    async function sleep() {
        await new Promise(r => setTimeout(r, 10));
    }


</script>
